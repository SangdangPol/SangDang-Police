<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ì²­ì£¼ìƒë‹¹ê²½ì°°ì„œ í”¼ì‹± ê°€ë“œ</title>
    <!-- [ì„±ê³¼ë¶„ì„] êµ¬ê¸€ ì• ë„ë¦¬í‹±ìŠ¤ (GA4) ì—°ë™ ì½”ë“œ -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-J4W28Z27Z6"></script>
    <script>
        // ë³´ì´ìŠ¤í”¼ì‹± í›ˆë ¨ì†Œ ì „ìš© ì¸¡ì • ID
        const GA_MEASUREMENT_ID = 'G-J4W28Z27Z6';

        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        
        gtag('js', new Date());
        gtag('config', GA_MEASUREMENT_ID, {
            'page_title': 'ë³´ì´ìŠ¤í”¼ì‹± í›ˆë ¨ì†Œ', 
            'anonymize_ip': true 
        });

        // ë²„íŠ¼ í´ë¦­ ë“± ì´ë²¤íŠ¸ ì¶”ì ì„ ìœ„í•œ í—¬í¼ í•¨ìˆ˜
        function sendAnalyticsEvent(eventName, params = {}) {
            gtag('event', eventName, params);
            console.log(`[í†µê³„ ì „ì†¡] ${eventName}`, params);
        }
    </script>
    <style>
        /* [ë””ìì¸ ì‹œìŠ¤í…œ] */
        :root {
            --bg-main: #0f172a;
            --bg-card: rgba(30, 41, 59, 0.7);
            --primary: #3b82f6;
            --accent: #0ea5e9;
            --danger: #ef4444;
            --safe: #22c55e;
            --text-light: #f8fafc;
            --text-dim: #94a3b8;
            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Apple SD Gothic Neo', sans-serif;
            margin: 0; background-color: #000; color: var(--text-light);
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            display: flex; justify-content: center;
            background-image: linear-gradient(to bottom, #0f172a, #000);
            overflow: hidden;
        }

        .app-frame {
            width: 100%; max-width: 450px; height: 100%;
            display: flex; flex-direction: column; position: relative;
            background: var(--bg-main);
        }

        /* í—¤ë” */
        .header {
            flex: 0 0 50px; padding: 0 20px; display: flex; align-items: center; justify-content: space-between;
            border-bottom: var(--glass-border); background: rgba(15, 23, 42, 0.9); z-index: 50;
        }
        .brand { display: flex; align-items: center; gap: 8px; font-weight: 700; font-size: 14px; }
        .brand-logo { width: 28px; height: 28px; object-fit: contain; }
        .dept-tag { background: linear-gradient(135deg, var(--primary), var(--accent)); padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold; }

        /* ì»¨í…ì¸  ì˜ì—­ */
        .content-view {
            flex: 1; overflow-y: auto; padding: 15px; padding-bottom: 90px;
            display: none; -webkit-overflow-scrolling: touch;
        }
        .content-view.active { display: block; }

        .hero-banner { 
            background: linear-gradient(135deg, #1e3a8a, #3b82f6); 
            padding: 15px; border-radius: 16px; margin-bottom: 15px;
            position: relative; overflow: hidden; border: var(--glass-border); 
        }
        .hero-banner h1 { margin: 0; font-size: 18px; font-weight: 800; }
        .hero-banner p { margin: 4px 0 0; opacity: 0.9; font-size: 12px; }
        
        .section-label { font-size: 13px; color: var(--accent); font-weight: bold; margin-bottom: 10px; display: block; }
        
        .grid-menu { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .menu-card { 
            background: var(--bg-card); border: var(--glass-border); 
            padding: 12px; border-radius: 14px; text-align: center; cursor: pointer; 
            position: relative; display: flex; flex-direction: column; align-items: center; 
        }
        .menu-card:active { transform: scale(0.96); background: rgba(59, 130, 246, 0.3); }
        .menu-icon { font-size: 24px; margin-bottom: 6px; }
        .menu-title { font-weight: bold; font-size: 13px; margin-bottom: 2px; }
        .menu-desc { font-size: 10px; color: var(--text-dim); }

        /* ì¶œì²˜ í‘œê¸° */
        .credit-text {
            text-align: center; margin-top: 20px; font-size: 10px;
            color: rgba(255, 255, 255, 0.3); letter-spacing: 0.5px;
        }

        /* í•˜ë‹¨ íƒ­ë°” */
        .bottom-nav {
            position: absolute; bottom: 20px; left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 380px; height: 55px;
            background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px);
            border-radius: 30px; border: var(--glass-border);
            display: flex; justify-content: space-around; align-items: center;
            z-index: 999; box-shadow: 0 5px 20px rgba(0,0,0,0.6);
        }

        /* ì˜¤ë²„ë ˆì´ (ì „í™” ìˆ˜ì‹ ) */
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; background: #000; display: none; flex-direction: column; }
        .overlay.active { display: flex; }
        
        .call-screen { flex: 1; display: flex; flex-direction: column; justify-content: space-between; padding: 60px 30px 100px 30px; background: radial-gradient(circle at center, #1e293b 0%, #000 100%); }
        .caller-info { text-align: center; margin-top: 20px; }
        .c-name { font-size: 30px; font-weight: 700; margin: 10px 0; }
        .c-loc { color: #94a3b8; font-size: 14px; margin-top: 5px; }
        .call-actions { display: flex; justify-content: space-around; width: 100%; }
        .c-btn { width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; color: white; cursor: pointer; }
        .btn-red { background: var(--danger); }
        .btn-green { background: var(--safe); animation: pulse 1.5s infinite; }

        /* ì˜¤ë²„ë ˆì´ (í†µí™” ì¤‘ - ëª©ì†Œë¦¬ ì¬ìƒ) */
        .voice-screen { 
            flex: 1; display: none; flex-direction: column; align-items: center; justify-content: center; 
            background: #0f172a; padding: 30px; text-align: center;
        }
        .voice-wave { font-size: 60px; margin-bottom: 20px; animation: bounce 1s infinite; }
        .voice-status { font-size: 18px; color: var(--accent); margin-bottom: 40px; font-weight: bold; }
        
        .choice-container { width: 100%; display: flex; flex-direction: column; gap: 15px; opacity: 0; transition: opacity 0.5s; }
        .choice-container.show { opacity: 1; }
        .choice-btn { 
            background: rgba(255, 255, 255, 0.1); border: 1px solid rgba(255,255,255,0.2);
            padding: 16px; border-radius: 12px; color: white; font-size: 15px; text-align: left; cursor: pointer;
        }
        .choice-btn:active { background: rgba(59, 130, 246, 0.3); }

        /* ê²°ê³¼ í™”ë©´ */
        .result-screen { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; background: #0f172a; display: none; }
        .score-circle { width: 150px; height: 150px; border-radius: 50%; border: 8px solid #334155; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; }
        .score-circle.safe { border-color: var(--safe); }
        .score-circle.danger { border-color: var(--danger); }
        .s-num { font-size: 40px; font-weight: 900; }
        .res-desc { color: #cbd5e1; line-height: 1.6; margin-bottom: 30px; font-size: 15px; }

        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 2px; color: var(--text-dim); cursor: pointer; width: 60px; }
        .nav-icon-svg { width: 22px; height: 22px; fill: var(--text-dim); transition: all 0.2s; }
        .nav-item.active { color: var(--accent); }
        .nav-item.active .nav-icon-svg { fill: var(--accent); transform: translateY(-2px); filter: drop-shadow(0 0 5px var(--accent)); }
        .nav-text { font-size: 10px; }

        .quiz-card { background: var(--bg-card); border: var(--glass-border); padding: 20px; border-radius: 18px; margin-bottom: 20px; }
        .quiz-msg { background: #e2e8f0; color: #1e293b; padding: 15px; border-radius: 10px; font-size: 14px; line-height: 1.5; margin: 15px 0; border-left: 4px solid var(--primary); }
        .quiz-btn-group { display: flex; gap: 10px; }
        .quiz-btn { flex: 1; padding: 12px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 14px; }
        .q-fake { background: rgba(239, 68, 68, 0.2); color: #fca5a5; } 
        .q-real { background: rgba(34, 197, 94, 0.2); color: #86efac; }
        
        /* [ê¸´ê¸‰ ìˆ˜ì •] ê°€ì´ë“œ ë¡œê³  í¬ê¸° ê³ ì • */
        .guide-title-box { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        
        /* !importantë¥¼ ë¶™ì—¬ì„œ ì–´ë–¤ ê²½ìš°ì—ë„ 30pxë¥¼ ë„˜ì§€ ì•Šê²Œ ê³ ì • */
        .guide-ci { 
            width: 30px !important; 
            height: 30px !important; 
            object-fit: contain; 
            flex-shrink: 0; 
        }

        .guide-item { display: flex; gap: 15px; background: var(--bg-card); padding: 15px; border-radius: 18px; border: var(--glass-border); margin-bottom: 10px; align-items: center; }
        .g-num { font-size: 24px; font-weight: 900; color: var(--accent); opacity: 0.8; }
        .g-txt h3 { margin: 0 0 5px 0; font-size: 15px; color: white; }
        .g-txt p { margin: 0; font-size: 12px; color: var(--text-dim); line-height: 1.4; }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(34, 197, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); } }
        @keyframes bounce { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.2); } }
    </style>
</head>
<body>

<div class="app-frame">
    <audio id="ringtone" loop preload="auto"><source src="ringtone.mp3" type="audio/mpeg"></audio>
    <audio id="voice-player" preload="auto"></audio>

    <header class="header">
        <div class="brand">
            <img src="logo.png" alt="ë¡œê³ " class="brand-logo" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1069/1069102.png'"> 
            <span>ì²­ì£¼ìƒë‹¹ê²½ì°°ì„œ</span>
        </div>
        <span class="dept-tag">ë²”ì£„ì˜ˆë°©ëŒ€ì‘ê³¼</span>
    </header>

    <div id="view-home" class="content-view active">
        <div class="hero-banner">
            <h1>í”¼ì‹± ì˜ˆë°© í›ˆë ¨ì†Œ</h1>
            <p>ê°€ìƒì˜ ë²”ì¸ ëª©ì†Œë¦¬ë¥¼ ë“£ê³  ëŒ€ì²˜í•˜ì„¸ìš”!</p>
        </div>
        <span class="section-label">âš¡ ì²´í—˜í•  ë²”ì£„ ìœ í˜• ì„ íƒ (ì†Œë¦¬ ì£¼ì˜)</span>
        <div class="grid-menu">
            <div class="menu-card" onclick="startSim('prosecutor')"><span class="menu-icon">âš–ï¸</span><div class="menu-title">ê¸°ê´€ ì‚¬ì¹­</div><div class="menu-desc">ê²€ì‚¬ ì‚¬ì¹­</div></div>
            <div class="menu-card" onclick="startSim('loan')"><span class="menu-icon">ğŸ’°</span><div class="menu-title">ëŒ€ì¶œ ë¹™ì</div><div class="menu-desc">ì €ê¸ˆë¦¬ ëŒ€ì¶œ</div></div>
            <div class="menu-card" onclick="startSim('family')"><span class="menu-icon">ğŸ“±</span><div class="menu-title">ìë…€ ì‚¬ì¹­</div><div class="menu-desc">ì•¡ì • íŒŒì†</div></div>
            <div class="menu-card" onclick="startSim('romance')"><span class="menu-icon">ğŸ’˜</span><div class="menu-title">ë¡œë§¨ìŠ¤ ìŠ¤ìº </div><div class="menu-desc">íŒŒë³‘ ë¯¸êµ°</div></div>
            <div class="menu-card" onclick="startSim('smishing')"><span class="menu-icon">ğŸ“©</span><div class="menu-title">ì§€ì›ê¸ˆ ë¬¸ì</div><div class="menu-desc">ì‹œì²­ ì‚¬ì¹­</div></div>
            <div class="menu-card" onclick="startSim('invest')"><span class="menu-icon">ğŸ“ˆ</span><div class="menu-title">íˆ¬ì ë¦¬ë”©ë°©</div><div class="menu-desc">300% ìˆ˜ìµ</div></div>
        </div>
        
        <div class="credit-text">
            AI Voice provided by <strong>Naver Clova Dubbing</strong>
        </div>
    </div>

    <div id="view-smishing" class="content-view">
        <div class="hero-banner" style="background: linear-gradient(135deg, #059669, #34d399);"><h1>ìŠ¤ë¯¸ì‹± íƒì§€ì†Œ</h1><p>ë¬¸ì ì† <strong>ê°€ì§œ</strong>ë¥¼ ì°¾ì•„ë‚´ì„¸ìš”.</p></div>
        <div class="quiz-card">
            <div style="font-weight:bold; margin-bottom:5px;">Q1. ëª¨ë°”ì¼ ì²­ì²©ì¥</div>
            <div class="quiz-msg">[Webë°œì‹ ] ê¹€ì² ìˆ˜â™¥ì´ì˜í¬ ê²°í˜¼í•©ë‹ˆë‹¤.<br>ëª¨ë°”ì¼ ì²­ì²©ì¥: <strong>wedding.invitation.apk</strong></div>
            <div class="quiz-btn-group">
                <button class="quiz-btn q-fake" onclick="checkQuiz(true, true, 'ì •ë‹µ! apkëŠ” ì•…ì„± ì•± ì„¤ì¹˜ íŒŒì¼ì…ë‹ˆë‹¤. ì ˆëŒ€ ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”.')">ğŸš¨ ìŠ¤ë¯¸ì‹±ì´ë‹¤</button>
                <button class="quiz-btn q-real" onclick="checkQuiz(false, true, 'í‹€ë ¸ìŠµë‹ˆë‹¤. apk íŒŒì¼ì€ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤.')">âœ… ì •ìƒ ë¬¸ìë‹¤</button>
            </div>
        </div>
        <div class="quiz-card">
            <div style="font-weight:bold; margin-bottom:5px;">Q2. íƒë°° ì£¼ì†Œì§€ í™•ì¸</div>
            <div class="quiz-msg">[CJëŒ€í•œí†µìš´] ìš´ì†¡ì¥ë²ˆí˜¸[45***] ì£¼ì†Œì§€ ë¶ˆë¶„ëª….<br>í™•ì¸í•˜ê¸°: <strong>cj-gls.com.kr.xyz</strong></div>
            <div class="quiz-btn-group">
                <button class="quiz-btn q-fake" onclick="checkQuiz(true, true, 'ì •ë‹µ! ê³µì‹ ì£¼ì†Œ ë’¤ì— xyz ë“± ì´ìƒí•œ ì˜ì–´ê°€ ë¶™ìœ¼ë©´ 100% ê°€ì§œì…ë‹ˆë‹¤.')">ğŸš¨ ìŠ¤ë¯¸ì‹±ì´ë‹¤</button>
                <button class="quiz-btn q-real" onclick="checkQuiz(false, true, 'í‹€ë ¸ìŠµë‹ˆë‹¤. íƒë°°ì‚¬ëŠ” ë§í¬ë¥¼ ë³´ë‚´ì§€ ì•ŠìŠµë‹ˆë‹¤.')">âœ… ì •ìƒ ë¬¸ìë‹¤</button>
            </div>
        </div>
    </div>

    <div id="view-guide" class="content-view">
        <div class="guide-title-box">
            <img src="logo.png" alt="CI" class="guide-ci" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1069/1069102.png'">
            <span class="section-label" style="margin-bottom:0; font-size:18px;">ë³´ì´ìŠ¤í”¼ì‹± ì˜ˆë°© í–‰ë™ìˆ˜ì¹™</span>
        </div>
        <div class="guide-item"><div class="g-num">01</div><div class="g-txt"><h3>ë§í¬(URL) í´ë¦­ ê¸ˆì§€</h3><p>ì¶œì²˜ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” ë¬¸ì ì† ì¸í„°ë„· ì£¼ì†ŒëŠ” ì ˆëŒ€ ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”.</p></div></div>
        <div class="guide-item"><div class="g-num">02</div><div class="g-txt"><h3>ì•± ì„¤ì¹˜ ìš”êµ¬ëŠ” ì‚¬ê¸°</h3><p>ê¸°ê´€ì€ ì „í™”ë¡œ 'ë³´ì•ˆ ì•±' ì„¤ì¹˜ë¥¼ ìš”êµ¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p></div></div>
        <div class="guide-item"><div class="g-num">03</div><div class="g-txt"><h3>ëŠê³ , í™•ì¸ ì „í™”</h3><p>ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì „í™”ë¥¼ ë°›ì•˜ë‹¤ë©´ ì¼ë‹¨ ëŠìœ¼ì„¸ìš”.<br>ê·¸ë¦¬ê³  112ë¡œ í™•ì¸í•˜ì„¸ìš”.</p></div></div>
        <div style="margin-top:20px; padding:15px; background:rgba(239, 68, 68, 0.1); border-radius:15px; text-align:center; color:#fca5a5; font-size:13px;">
            <strong>ğŸš¨ ë³´ì´ìŠ¤í”¼ì‹± ì‹ ê³ : êµ­ë²ˆì—†ì´ 112</strong><br><div style="height:5px;"></div>
            <strong>â˜ï¸ ê¸ˆìœµê°ë…ì› ìƒë‹´: 1332</strong>
        </div>
    </div>

    <div id="sim-overlay" class="overlay">
        <div id="screen-call" class="call-screen">
            <div class="caller-info">
                <div class="c-sub">ìˆ˜ì‹  ì „í™”</div>
                <div id="sim-name" class="c-name">ë°œì‹ ì</div>
                <div id="sim-loc" class="c-loc">South Korea</div>
            </div>
            <div class="call-actions"><div class="c-btn btn-red" onclick="endSim(100)">ğŸ“</div><div class="c-btn btn-green" onclick="answerCall()">ğŸ“</div></div>
        </div>

        <div id="screen-voice" class="voice-screen">
            <div class="voice-wave">ğŸ”Š</div>
            <div id="voice-status" class="voice-status">ë²”ì¸ ëª©ì†Œë¦¬ ë“£ëŠ” ì¤‘...</div>
            <div id="choice-dock" class="choice-container"></div>
        </div>

        <div id="screen-result" class="result-screen">
            <div id="res-circle" class="score-circle"><span id="res-score" class="s-num">0</span></div>
            <h2 id="res-title">ê²°ê³¼</h2>
            <p id="res-desc" class="res-desc">ì„¤ëª…</p>
            <button onclick="closeSim()" style="padding:15px 40px; border-radius:30px; border:none; background:var(--primary); color:white; font-weight:bold;">ëŒì•„ê°€ê¸°</button>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home', this)">
            <svg class="nav-icon-svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg><span class="nav-text">í›ˆë ¨ì†Œ</span>
        </div>
        <div class="nav-item" onclick="switchTab('smishing', this)">
            <svg class="nav-icon-svg" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg><span class="nav-text">ìŠ¤ë¯¸ì‹±</span>
        </div>
        <div class="nav-item" onclick="switchTab('guide', this)">
            <svg class="nav-icon-svg" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg><span class="nav-text">ê°€ì´ë“œ</span>
        </div>
    </div>
</div>

<script>
    /* [DB] ì‹¤ì œ MP3 íŒŒì¼ëª…ê³¼ ì„ íƒì§€ ë°ì´í„° */
    const DB = {
        'prosecutor': { 
            caller: 'ì„œìš¸ì¤‘ì•™ì§€ê²€', loc: 'Seoul', voice: 'voice_prosecutor.mp3',
            choices: [
                { txt: "ì œ ëª…ì˜ í†µì¥ì´ìš”? ë¬´ì„œìš´ë° ì‹œí‚¤ëŠ” ëŒ€ë¡œ í• ê²Œìš”.", score: -100, msg: "âŒ í”¼í•´ ë°œìƒ! ê²€ì°°ì€ ì ˆëŒ€ ì „í™”ë¡œ ìˆ˜ì‚¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." },
                { txt: "ë¬´ìŠ¨ ì‚¬ê±´ì¸ì§€ ì†Œì†ê³¼ ì´ë¦„ì„ ì •í™•íˆ ëŒ€ì„¸ìš”.", score: 50, msg: "âš ï¸ ì£¼ì˜! ë²”ì¸ì´ ë” ê°•í•˜ê²Œ í˜‘ë°•í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤." },
                { txt: "ë³´ì´ìŠ¤í”¼ì‹±ì´ë„¤. ì œê°€ ì§ì ‘ ê²€ì°°ì²­ì— í™•ì¸í•©ë‹ˆë‹¤.", score: 100, msg: "â­• ë°©ì–´ ì„±ê³µ! ì˜ì‹¬í•˜ê³  í™•ì¸í•˜ëŠ” ê²ƒì´ ìµœì„ ì…ë‹ˆë‹¤." }
            ]
        },
        'loan': { 
            caller: '1588-XXXX', loc: 'Bank', voice: 'voice_loan.mp3',
            choices: [
                { txt: "ì •ë§ 2.5%ìš”? ëŒ€ì¶œ ì§„í–‰í•´ì£¼ì„¸ìš”.", score: -100, msg: "âŒ í”¼í•´ ë°œìƒ! ì €ê¸ˆë¦¬ ëŒ€ì¶œ ë¯¸ë¼ì— ë‹¹í•˜ì…¨ìŠµë‹ˆë‹¤." },
                { txt: "ê¸°ì¡´ ëŒ€ì¶œê¸ˆ ìƒí™˜í•˜ë¼ê³ ìš”? ì…ê¸ˆí• ê²Œìš”.", score: -100, msg: "âŒ í”¼í•´ ë°œìƒ! ìƒí™˜ ìê¸ˆì€ ì ˆëŒ€ ê°œì¸ ê³„ì¢Œë¡œ ë°›ì§€ ì•ŠìŠµë‹ˆë‹¤." },
                { txt: "ëŒ€ì¶œ ê¶Œìœ  ì „í™”ëŠ” ë¶ˆë²•ì…ë‹ˆë‹¤. ëŠìŠµë‹ˆë‹¤.", score: 100, msg: "â­• ë°©ì–´ ì„±ê³µ! ê¸ˆìœµê¸°ê´€ì€ ë¨¼ì € ëŒ€ì¶œ ê¶Œìœ  ì „í™”ë¥¼ í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤." }
            ]
        },
        'family': { 
            caller: 'ë‚´ ë”¸â™¡', loc: 'Mobile', voice: 'voice_family.mp3',
            choices: [
                { txt: "ì–´ë¨¸! ì—„ë§ˆê°€ ë°”ë¡œ ë§í¬ ëˆŒëŸ¬ì„œ í•´ì¤„ê²Œ.", score: -100, msg: "âŒ í”¼í•´ ë°œìƒ! ë§í¬ë¥¼ ëˆ„ë¥´ë©´ ì•…ì„± ì•±ì´ ì„¤ì¹˜ë©ë‹ˆë‹¤." },
                { txt: "ì¸ì¦ì´ ì•ˆ ë¼? ì—„ë§ˆ ì‹ ë¶„ì¦ ì‚¬ì§„ ì°ì–´ ë³´ë‚¼ê²Œ.", score: -100, msg: "âŒ í”¼í•´ ë°œìƒ! ì‹ ë¶„ì¦ ì‚¬ì§„ìœ¼ë¡œ ëŒ€í¬í°ì´ ê°œí†µë©ë‹ˆë‹¤." },
                { txt: "ë”¸, ì›ë˜ ì“°ë˜ ë²ˆí˜¸ë¡œ ì „í™”í•´ ë´. ëª©ì†Œë¦¬ ë“¤ì–´ì•¼ í•´.", score: 100, msg: "â­• ë°©ì–´ ì„±ê³µ! ë°˜ë“œì‹œ ë³¸ì¸ ëª©ì†Œë¦¬ë¥¼ í™•ì¸í•´ì•¼ í•©ë‹ˆë‹¤." }
            ]
        },
        'romance': { 
            caller: 'James Kim', loc: 'USA', voice: 'voice_romance.mp3',
            choices: [
                { txt: "ì–´ë¨¸, 300ë§Œì›ì´ í•„ìš”í•´? ë‚´ê°€ ë³´ë‚´ì¤„ê²Œ.", score: -100, msg: "âŒ í”¼í•´ ë°œìƒ! ë¡œë§¨ìŠ¤ ìŠ¤ìº ì— ë‹¹í•˜ì…¨ìŠµë‹ˆë‹¤." },
                { txt: "ì–¼êµ´ë„ ì•ˆ ë´¤ëŠ”ë° ëˆì„ ë³´ë‚´ë¼ê³ ? ì‚¬ê¸°ê¾¼ì•„!", score: 100, msg: "â­• ë°©ì–´ ì„±ê³µ! SNSë¡œ ë§Œë‚œ ì‚¬ëŒì´ ëˆì„ ìš”êµ¬í•˜ë©´ 100% ì‚¬ê¸°ì…ë‹ˆë‹¤." }
            ]
        },
        'smishing': { 
            caller: 'ì²­ì£¼ì‹œì²­', loc: 'Cheongju', voice: 'voice_smishing.mp3',
            choices: [
                { txt: "ì•„, ë§ˆê°ì´ë¼ê³ ìš”? ì§€ê¸ˆ ë§í¬ ëˆŒëŸ¬ì„œ ì‹ ì²­í• ê²Œìš”.", score: -100, msg: "âŒ í”¼í•´ ë°œìƒ! ê´€ê³µì„œëŠ” ë¬¸ìë¡œ ë§í¬ë¥¼ ë³´ë‚´ì§€ ì•ŠìŠµë‹ˆë‹¤." },
                { txt: "ì²­ì£¼ì‹œì²­ì´ë¼ê³ ìš”? ì œê°€ ì‹œì²­ìœ¼ë¡œ ì§ì ‘ ë°©ë¬¸í•˜ê² ìŠµë‹ˆë‹¤.", score: 100, msg: "â­• ë°©ì–´ ì„±ê³µ! í•´ë‹¹ ë¶€ì„œì— ì§ì ‘ ì „í™”í•˜ê±°ë‚˜ ë°©ë¬¸í•´ì„œ í™•ì¸í•˜ì„¸ìš”." }
            ]
        },
        'invest': { 
            caller: 'ê¹€ì‚¬ë¶€ íŒ€ì¥', loc: 'Investment', voice: 'voice_invest.mp3',
            choices: [
                { txt: "300% ìˆ˜ìµì´ìš”? ì§€ê¸ˆ ë°”ë¡œ ì…ê¸ˆí•˜ê² ìŠµë‹ˆë‹¤.", score: -100, msg: "âŒ í”¼í•´ ë°œìƒ! ì„¸ìƒì— ì›ê¸ˆì´ ë³´ì¥ë˜ëŠ” ê³ ìˆ˜ìµ íˆ¬ìëŠ” ì—†ìŠµë‹ˆë‹¤." },
                { txt: "ì‚¬ê¸° ì¹˜ì§€ ë§ˆì„¸ìš”. ê¸ˆìœµìœ„ì— ë“±ë¡ëœ ì—…ì²´ì…ë‹ˆê¹Œ?", score: 100, msg: "â­• ë°©ì–´ ì„±ê³µ! ë¦¬ë”©ë°©ì€ ëŒ€ë¶€ë¶„ ì‚¬ê¸°ì…ë‹ˆë‹¤." }
            ]
        }
    };

    let vibrationInterval = null;
    let currentVoice = null;
    let curData = null;

    /* ì†Œë¦¬ & ì§„ë™ */
    function playRingtone() {
        let audio = document.getElementById('ringtone');
        if (audio) { audio.currentTime = 0; audio.play().catch(e=>{}); }
        if (navigator.vibrate) {
            navigator.vibrate([1000, 1000]); 
            vibrationInterval = setInterval(() => { navigator.vibrate([1000, 1000]); }, 2000);
        }
    }

    function stopRingtone() {
        let audio = document.getElementById('ringtone');
        if (audio) { audio.pause(); audio.currentTime = 0; }
        if (vibrationInterval) { clearInterval(vibrationInterval); vibrationInterval = null; }
        if (navigator.vibrate) navigator.vibrate(0);
    }

    /* ì‹œë‚˜ë¦¬ì˜¤ ì‹œì‘ */
    function startSim(type) {
        curData = DB[type];
        document.getElementById('sim-name').innerText = curData.caller;
        document.getElementById('sim-loc').innerText = curData.loc;
        document.getElementById('sim-overlay').classList.add('active');
        
        ['screen-call','screen-voice','screen-result'].forEach(e => document.getElementById(e).style.display='none');
        document.getElementById('screen-call').style.display = 'flex';
        
        playRingtone();
    }

    /* ì „í™” ë°›ê¸° -> ëª©ì†Œë¦¬ ì¬ìƒ */
    function answerCall() {
        stopRingtone();
        document.getElementById('screen-call').style.display = 'none';
        document.getElementById('screen-voice').style.display = 'flex';
        
        let voicePlayer = document.getElementById('voice-player');
        voicePlayer.src = curData.voice;
        
        document.getElementById('voice-status').innerText = "ë²”ì¸ ëª©ì†Œë¦¬ ë“£ëŠ” ì¤‘...";
        document.getElementById('choice-dock').innerHTML = '';
        document.getElementById('choice-dock').classList.remove('show');

        voicePlayer.play().catch(e => {
            alert("ì†Œë¦¬ ì¬ìƒ ì˜¤ë¥˜: íŒŒì¼ëª…ì„ í™•ì¸í•´ì£¼ì„¸ìš”.");
        });

        voicePlayer.onended = function() {
            showChoices();
        };
    }

    /* ì„ íƒì§€ í‘œì‹œ í•¨ìˆ˜ */
    function showChoices() {
        document.getElementById('voice-status').innerText = "ì–´ë–»ê²Œ ëŒ€ì²˜í•˜ì‹œê² ìŠµë‹ˆê¹Œ?";
        let dock = document.getElementById('choice-dock');
        let html = '';
        curData.choices.forEach(opt => {
            html += `<div class="choice-btn" onclick="endSim(${opt.score}, '${opt.msg}')">${opt.txt}</div>`;
        });
        dock.innerHTML = html;
        dock.classList.add('show');
    }

    /* ê²°ê³¼ ì²˜ë¦¬ */
    function endSim(score, msg) {
        let voicePlayer = document.getElementById('voice-player');
        voicePlayer.pause();

        ['screen-call','screen-voice','screen-result'].forEach(e => document.getElementById(e).style.display='none');
        document.getElementById('screen-result').style.display = 'flex';
        
        let circle = document.getElementById('res-circle');
        let title = document.getElementById('res-title');
        let desc = document.getElementById('res-desc');
        
        document.getElementById('res-score').innerText = score > 0 ? score : 0;
        desc.innerText = msg;

        if(score >= 50) {
            circle.className = "score-circle safe";
            title.innerText = "ë°©ì–´ ì„±ê³µ";
            title.style.color = "var(--safe)";
        } else {
            circle.className = "score-circle danger";
            title.innerText = "í”¼í•´ ë°œìƒ";
            title.style.color = "var(--danger)";
        }
    }

    function checkQuiz(uFake, rFake, msg) {
        document.getElementById('sim-overlay').classList.add('active');
        ['screen-call','screen-voice','screen-result'].forEach(e => document.getElementById(e).style.display='none');
        document.getElementById('screen-result').style.display = 'flex';
        
        let circle = document.getElementById('res-circle');
        let title = document.getElementById('res-title');
        let desc = document.getElementById('res-desc');
        
        let isCorrect = (uFake === rFake);
        document.getElementById('res-score').innerText = isCorrect ? 100 : 0;
        desc.innerText = msg;

        if (isCorrect) {
            circle.className = "score-circle safe";
            title.innerText = "ì •ë‹µì…ë‹ˆë‹¤!";
            title.style.color = "var(--safe)";
        } else {
            circle.className = "score-circle danger";
            title.innerText = "ì˜¤ë‹µì…ë‹ˆë‹¤!";
            title.style.color = "var(--danger)";
        }
    }

    function closeSim() {
        stopRingtone();
        let voicePlayer = document.getElementById('voice-player');
        voicePlayer.pause();
        document.getElementById('sim-overlay').classList.remove('active');
    }

    function switchTab(id, el) {
        document.querySelectorAll('.content-view').forEach(e => e.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(e => e.classList.remove('active'));
        el.classList.add('active');
    }
</script>

</body>
</html>



