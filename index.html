<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ì²­ì£¼ìƒë‹¹ê²½ì°°ì„œ í”¼ì‹± ê°€ë“œ</title>
    <style>
        /* [ë””ìì¸ ì‹œìŠ¤í…œ] */
        :root {
            --bg-main: #0f172a;
            --bg-card: rgba(30, 41, 59, 0.7);
            --primary: #3b82f6;
            --accent: #0ea5e9;
            --danger: #ef4444;
            --safe: #22c55e;
            --text-light: #f8fafc;
            --text-dim: #94a3b8;
            --glass-border: 1px solid rgba(255, 255, 255, 0.1);
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
        
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Apple SD Gothic Neo', sans-serif;
            margin: 0; background-color: #000; color: var(--text-light);
            position: fixed; top: 0; left: 0; right: 0; bottom: 0;
            display: flex; justify-content: center;
            background-image: linear-gradient(to bottom, #0f172a, #000);
            overflow: hidden;
        }

        .app-frame {
            width: 100%; max-width: 450px; height: 100%;
            display: flex; flex-direction: column; position: relative;
            background: var(--bg-main);
        }

        /* [ìˆ˜ì •] í—¤ë” ë†’ì´ 60px -> 50pxë¡œ ì¶•ì†Œ */
        .header {
            flex: 0 0 50px; padding: 0 20px; display: flex; align-items: center; justify-content: space-between;
            border-bottom: var(--glass-border); background: rgba(15, 23, 42, 0.9); z-index: 50;
        }
        .brand { display: flex; align-items: center; gap: 8px; font-weight: 700; font-size: 14px; }
        .brand-logo { width: 28px; height: 28px; object-fit: contain; }
        .dept-tag { background: linear-gradient(135deg, var(--primary), var(--accent)); padding: 3px 8px; border-radius: 10px; font-size: 10px; font-weight: bold; }

        /* ì»¨í…ì¸  ì˜ì—­ */
        .content-view {
            flex: 1; overflow-y: auto; padding: 15px; 
            padding-bottom: 90px; /* í•˜ë‹¨ ê³µê°„ í™•ë³´ */
            display: none; -webkit-overflow-scrolling: touch;
        }
        .content-view.active { display: block; }

        /* [ìˆ˜ì •] ë°°ë„ˆ í¬ê¸° ë‹¤ì´ì–´íŠ¸ (ì—¬ë°± ì¶•ì†Œ) */
        .hero-banner { 
            background: linear-gradient(135deg, #1e3a8a, #3b82f6); 
            padding: 15px; /* 25px -> 15px */
            border-radius: 16px; margin-bottom: 15px; /* 25px -> 15px */
            position: relative; overflow: hidden; border: var(--glass-border); 
        }
        .hero-banner h1 { margin: 0; font-size: 18px; font-weight: 800; }
        .hero-banner p { margin: 4px 0 0; opacity: 0.9; font-size: 12px; }
        .hero-icon { position: absolute; right: -10px; bottom: -10px; font-size: 80px; opacity: 0.1; transform: rotate(-10deg); }
        
        .section-label { font-size: 13px; color: var(--accent); font-weight: bold; margin-bottom: 10px; display: block; }
        
        /* [ìˆ˜ì •] ê·¸ë¦¬ë“œ ë©”ë‰´ ê°„ê²© ì¢í˜ */
        .grid-menu { display: grid; grid-template-columns: repeat(2, 1fr); gap: 10px; }
        .menu-card { 
            background: var(--bg-card); border: var(--glass-border); 
            padding: 12px; /* 15px -> 12px */
            border-radius: 14px; text-align: center; cursor: pointer; 
            position: relative; display: flex; flex-direction: column; align-items: center; 
        }
        .menu-card:active { transform: scale(0.96); background: rgba(59, 130, 246, 0.3); }
        .menu-icon { font-size: 24px; margin-bottom: 6px; } /* ì•„ì´ì½˜ ì¶•ì†Œ */
        .menu-title { font-weight: bold; font-size: 13px; margin-bottom: 2px; }
        .menu-desc { font-size: 10px; color: var(--text-dim); }

        /* [ìˆ˜ì •] í•˜ë‹¨ íƒ­ë°” ìŠ¬ë¦¼í™” & ìœ„ì¹˜ ì¡°ì • */
        .bottom-nav {
            position: absolute; bottom: 20px; /* 30px -> 20px (ë” ë‚´ë¦¼) */
            left: 50%; transform: translateX(-50%);
            width: 90%; max-width: 380px; height: 55px; /* 65px -> 55px (ë” ì–‡ê²Œ) */
            background: rgba(15, 23, 42, 0.95); backdrop-filter: blur(20px);
            border-radius: 30px; border: var(--glass-border);
            display: flex; justify-content: space-around; align-items: center;
            z-index: 999; box-shadow: 0 5px 20px rgba(0,0,0,0.6);
        }

        /* ì˜¤ë²„ë ˆì´ */
        .overlay { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 2000; background: #000; display: none; flex-direction: column; }
        .overlay.active { display: flex; }
        .call-screen { flex: 1; display: flex; flex-direction: column; justify-content: space-between; padding: 60px 30px 100px 30px; background: radial-gradient(circle at center, #1e293b 0%, #000 100%); }
        .caller-info { text-align: center; margin-top: 20px; }
        .c-name { font-size: 30px; font-weight: 700; margin: 10px 0; }
        .c-loc { color: #94a3b8; font-size: 14px; margin-top: 5px; }
        .call-actions { display: flex; justify-content: space-around; width: 100%; }
        .c-btn { width: 70px; height: 70px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 28px; color: white; cursor: pointer; }
        .btn-red { background: var(--danger); }
        .btn-green { background: var(--safe); animation: pulse 1.5s infinite; }

        .chat-screen { flex: 1; display: flex; flex-direction: column; background: #0f172a; display: none; }
        .chat-body { flex: 1; overflow-y: auto; padding: 20px; padding-bottom: 100px; display: flex; flex-direction: column; gap: 15px; }
        .bubble { max-width: 80%; padding: 12px 16px; border-radius: 16px; font-size: 15px; line-height: 1.4; }
        .b-them { background: #334155; color: white; align-self: flex-start; }
        .b-me { background: var(--primary); color: white; align-self: flex-end; }
        .choice-area { background: #1e293b; padding: 20px; border-radius: 20px 20px 0 0; }
        .choice-btn { width: 100%; padding: 15px; margin-bottom: 10px; background: rgba(255,255,255,0.1); color: white; border-radius: 12px; text-align: left; font-size: 14px; display: flex; justify-content: space-between; }

        .result-screen { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; padding: 30px; text-align: center; background: #0f172a; display: none; }
        .score-circle { width: 150px; height: 150px; border-radius: 50%; border: 8px solid #334155; display: flex; align-items: center; justify-content: center; margin-bottom: 20px; }
        .score-circle.safe { border-color: var(--safe); }
        .score-circle.danger { border-color: var(--danger); }
        .s-num { font-size: 40px; font-weight: 900; }

        .nav-item { display: flex; flex-direction: column; align-items: center; gap: 2px; color: var(--text-dim); cursor: pointer; width: 60px; }
        .nav-icon-svg { width: 22px; height: 22px; fill: var(--text-dim); transition: all 0.2s; }
        .nav-item.active { color: var(--accent); }
        .nav-item.active .nav-icon-svg { fill: var(--accent); transform: translateY(-2px); filter: drop-shadow(0 0 5px var(--accent)); }
        .nav-text { font-size: 10px; }

        /* ê¸°íƒ€ ìŠ¤íƒ€ì¼ */
        .quiz-card { background: var(--bg-card); border: var(--glass-border); padding: 20px; border-radius: 18px; margin-bottom: 20px; }
        .quiz-msg { background: #e2e8f0; color: #1e293b; padding: 15px; border-radius: 10px; font-size: 14px; line-height: 1.5; margin: 15px 0; border-left: 4px solid var(--primary); }
        .quiz-btn-group { display: flex; gap: 10px; }
        .quiz-btn { flex: 1; padding: 12px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; font-size: 14px; }
        .q-fake { background: rgba(239, 68, 68, 0.2); color: #fca5a5; } 
        .q-real { background: rgba(34, 197, 94, 0.2); color: #86efac; }
        .guide-title-box { display: flex; align-items: center; gap: 10px; margin-bottom: 20px; }
        .guide-ci { width: 24px; height: 24px; object-fit: contain; }
        .guide-item { display: flex; gap: 15px; background: var(--bg-card); padding: 15px; border-radius: 18px; border: var(--glass-border); margin-bottom: 10px; align-items: center; }
        .g-num { font-size: 24px; font-weight: 900; color: var(--accent); opacity: 0.8; }
        .g-txt h3 { margin: 0 0 5px 0; font-size: 15px; color: white; }
        .g-txt p { margin: 0; font-size: 12px; color: var(--text-dim); line-height: 1.4; }

        @keyframes pulse { 0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(34, 197, 94, 0); } 100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); } }
    </style>
</head>
<body>

<div class="app-frame">
    <audio id="ringtone" loop preload="auto"><source src="ringtone.mp3" type="audio/mpeg"></audio>

    <header class="header">
        <div class="brand">
            <img src="logo.png" alt="ë¡œê³ " class="brand-logo" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1069/1069102.png'"> 
            <span>ì²­ì£¼ìƒë‹¹ê²½ì°°ì„œ</span>
        </div>
        <span class="dept-tag">ë²”ì£„ì˜ˆë°©ëŒ€ì‘ê³¼</span>
    </header>

    <div id="view-home" class="content-view active">
        <div class="hero-banner">
            <h1>í”¼ì‹± ì˜ˆë°© í›ˆë ¨ì†Œ</h1>
            <p>6ëŒ€ ë²”ì£„ ìœ í˜• ê°€ìƒ ì²´í—˜ ë° ì§„ë‹¨</p>
        </div>
        <span class="section-label">âš¡ ì²´í—˜í•  ë²”ì£„ ìœ í˜• ì„ íƒ</span>
        <div class="grid-menu">
            <div class="menu-card" onclick="startSim('prosecutor')"><span class="menu-icon">âš–ï¸</span><div class="menu-title">ê¸°ê´€ ì‚¬ì¹­</div><div class="menu-desc">"ì„œìš¸ì§€ê²€ì…ë‹ˆë‹¤"</div></div>
            <div class="menu-card" onclick="startSim('loan')"><span class="menu-icon">ğŸ’°</span><div class="menu-title">ëŒ€ì¶œ ë¹™ì</div><div class="menu-desc">"ì €ê¸ˆë¦¬ ëŒ€ì¶œ"</div></div>
            <div class="menu-card" onclick="startSim('family')"><span class="menu-icon">ğŸ“±</span><div class="menu-title">ìë…€ ì‚¬ì¹­</div><div class="menu-desc">"ì—„ë§ˆ í° ê³ ì¥ë‚¬ì–´"</div></div>
            <div class="menu-card" onclick="startSim('romance')"><span class="menu-icon">ğŸ’˜</span><div class="menu-title">ë¡œë§¨ìŠ¤ ìŠ¤ìº </div><div class="menu-desc">"íŒŒë³‘ ë¯¸êµ° ì¥êµ"</div></div>
            <div class="menu-card" onclick="startSim('smishing')"><span class="menu-icon">ğŸ“©</span><div class="menu-title">ì§€ì›ê¸ˆ ë¬¸ì</div><div class="menu-desc">"ì²­ì£¼í˜ì´ ì ë¦½"</div></div>
            <div class="menu-card" onclick="startSim('invest')"><span class="menu-icon">ğŸ“ˆ</span><div class="menu-title">íˆ¬ì ë¦¬ë”©ë°©</div><div class="menu-desc">"300% ìˆ˜ìµ ë³´ì¥"</div></div>
        </div>
    </div>

    <div id="view-smishing" class="content-view">
        <div class="hero-banner" style="background: linear-gradient(135deg, #059669, #34d399);"><h1>ìŠ¤ë¯¸ì‹± íƒì§€ì†Œ</h1><p>ë¬¸ì ì† <strong>ê°€ì§œ</strong>ë¥¼ ì°¾ì•„ë‚´ì„¸ìš”.</p></div>
        <div class="quiz-card">
            <div style="font-weight:bold; margin-bottom:5px;">Q1. ëª¨ë°”ì¼ ì²­ì²©ì¥</div>
            <div class="quiz-msg">[Webë°œì‹ ] ê¹€ì² ìˆ˜â™¥ì´ì˜í¬ ê²°í˜¼í•©ë‹ˆë‹¤.<br>ëª¨ë°”ì¼ ì²­ì²©ì¥: <strong>wedding.invitation.apk</strong></div>
            <div class="quiz-btn-group">
                <button class="quiz-btn q-fake" onclick="checkQuiz(true, true, 'ì •ë‹µì…ë‹ˆë‹¤! apk íŒŒì¼ì€ ì•…ì„± ì•± ì„¤ì¹˜ íŒŒì¼ì…ë‹ˆë‹¤. ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”.')">ğŸš¨ ìŠ¤ë¯¸ì‹±ì´ë‹¤</button>
                <button class="quiz-btn q-real" onclick="checkQuiz(false, true, 'í‹€ë ¸ìŠµë‹ˆë‹¤. apk íŒŒì¼ì€ ë§¤ìš° ìœ„í—˜í•©ë‹ˆë‹¤.')">âœ… ì •ìƒ ë¬¸ìë‹¤</button>
            </div>
        </div>
        <div class="quiz-card">
            <div style="font-weight:bold; margin-bottom:5px;">Q2. íƒë°° ì£¼ì†Œì§€ í™•ì¸</div>
            <div class="quiz-msg">[CJëŒ€í•œí†µìš´] ìš´ì†¡ì¥ë²ˆí˜¸[45***] ì£¼ì†Œì§€ ë¶ˆë¶„ëª….<br>í™•ì¸í•˜ê¸°: <strong>cj-gls.com.kr.xyz</strong></div>
            <div class="quiz-btn-group">
                <button class="quiz-btn q-fake" onclick="checkQuiz(true, true, 'ì •ë‹µ! ê³µì‹ ì£¼ì†Œ ë’¤ì— xyz ë“± ì´ìƒí•œ ì˜ì–´ê°€ ë¶™ìœ¼ë©´ 100% ê°€ì§œì…ë‹ˆë‹¤.')">ğŸš¨ ìŠ¤ë¯¸ì‹±ì´ë‹¤</button>
                <button class="quiz-btn q-real" onclick="checkQuiz(false, true, 'í‹€ë ¸ìŠµë‹ˆë‹¤. íƒë°°ì‚¬ëŠ” ë§í¬ë¥¼ ë³´ë‚´ì§€ ì•ŠìŠµë‹ˆë‹¤.')">âœ… ì •ìƒ ë¬¸ìë‹¤</button>
            </div>
        </div>
    </div>

    <div id="view-guide" class="content-view">
        <div class="guide-title-box">
            <img src="logo.png" alt="CI" class="guide-ci" onerror="this.src='https://cdn-icons-png.flaticon.com/512/1069/1069102.png'">
            <span class="section-label" style="margin-bottom:0; font-size:18px;">ë²”ì£„ì˜ˆë°©ëŒ€ì‘ê³¼ í–‰ë™ìˆ˜ì¹™</span>
        </div>
        <div class="guide-item"><div class="g-num">01</div><div class="g-txt"><h3>ë§í¬(URL) í´ë¦­ ê¸ˆì§€</h3><p>ì¶œì²˜ë¥¼ ì•Œ ìˆ˜ ì—†ëŠ” ë¬¸ì ì† ì¸í„°ë„· ì£¼ì†ŒëŠ” ì ˆëŒ€ ëˆ„ë¥´ì§€ ë§ˆì„¸ìš”.</p></div></div>
        <div class="guide-item"><div class="g-num">02</div><div class="g-txt"><h3>ì•± ì„¤ì¹˜ ìš”êµ¬ëŠ” ì‚¬ê¸°</h3><p>ê¸°ê´€ì€ ì „í™”ë¡œ 'ë³´ì•ˆ ì•±' ì„¤ì¹˜ë¥¼ ìš”êµ¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.</p></div></div>
        <div class="guide-item"><div class="g-num">03</div><div class="g-txt"><h3>ëŠê³ , í™•ì¸ ì „í™”</h3><p>ì˜ì‹¬ìŠ¤ëŸ¬ìš´ ì „í™”ë¥¼ ë°›ì•˜ë‹¤ë©´ ì¼ë‹¨ ëŠìœ¼ì„¸ìš”. ê·¸ë¦¬ê³  112ë¡œ í™•ì¸í•˜ì„¸ìš”.</p></div></div>
        <div style="margin-top:20px; padding:15px; background:rgba(239, 68, 68, 0.1); border-radius:15px; text-align:center; color:#fca5a5; font-size:13px;">
            <strong>ğŸš¨ ë³´ì´ìŠ¤í”¼ì‹± ì‹ ê³ : êµ­ë²ˆì—†ì´ 112</strong><br><div style="height:5px;"></div>
            <strong>â˜ï¸ ê¸ˆìœµê°ë…ì› ìƒë‹´: 1332</strong>
        </div>
    </div>

    <div id="sim-overlay" class="overlay">
        <div id="screen-call" class="call-screen">
            <div class="caller-info">
                <div class="c-sub">ìˆ˜ì‹  ì „í™”</div>
                <div id="sim-name" class="c-name">ë°œì‹ ì</div>
                <div id="sim-loc" class="c-loc">South Korea</div>
            </div>
            <div class="call-actions"><div class="c-btn btn-red" onclick="endSim(100)">ğŸ“</div><div class="c-btn btn-green" onclick="answerCall()">ğŸ“</div></div>
        </div>
        <div id="screen-chat" class="chat-screen"><div class="header" style="text-align:center; padding:15px; border-bottom:1px solid #333;">í†µí™” ì¤‘</div><div id="chat-box" class="chat-body"></div><div id="choice-dock" class="choice-area"></div></div>
        <div id="screen-result" class="result-screen">
            <div id="res-circle" class="score-circle"><span id="res-score" class="s-num">0</span></div>
            <h2 id="res-title">ê²°ê³¼</h2><p id="res-desc">ì„¤ëª…</p>
            <button onclick="closeSim()" style="padding:15px 40px; border-radius:30px; border:none; background:var(--primary); color:white; font-weight:bold;">ëŒì•„ê°€ê¸°</button>
        </div>
    </div>

    <div class="bottom-nav">
        <div class="nav-item active" onclick="switchTab('home', this)">
            <svg class="nav-icon-svg" viewBox="0 0 24 24"><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg><span class="nav-text">í›ˆë ¨ì†Œ</span>
        </div>
        <div class="nav-item" onclick="switchTab('smishing', this)">
            <svg class="nav-icon-svg" viewBox="0 0 24 24"><path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/></svg><span class="nav-text">ìŠ¤ë¯¸ì‹±</span>
        </div>
        <div class="nav-item" onclick="switchTab('guide', this)">
            <svg class="nav-icon-svg" viewBox="0 0 24 24"><path d="M12 1L3 5v6c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V5l-9-4zm0 10.99h7c-.53 4.12-3.28 7.79-7 8.94V12H5V6.3l7-3.11v8.8z"/></svg><span class="nav-text">ê°€ì´ë“œ</span>
        </div>
    </div>
</div>

<script>
    /* 1. ì†Œë¦¬ & ì§„ë™ ì—”ì§„ */
    let vibrationInterval = null;
    
    function playRingtone() {
        let audio = document.getElementById('ringtone');
        if (audio) {
            audio.currentTime = 0;
            // ì¤‘ìš”: ì‚¬ìš©ì í´ë¦­ ì´ë²¤íŠ¸ ì•ˆì—ì„œ ì‹¤í–‰ë˜ë¯€ë¡œ ì†Œë¦¬ ì¬ìƒë¨
            audio.play().catch(e => console.log("ì†Œë¦¬ ì¬ìƒ ì‹¤íŒ¨: ì‚¬ìš©ì ì¸í„°ë™ì…˜ í•„ìš”"));
        }
        if (navigator.vibrate) {
            navigator.vibrate([1000, 1000]); 
            vibrationInterval = setInterval(() => { navigator.vibrate([1000, 1000]); }, 2000);
        }
    }

    function stopRingtone() {
        let audio = document.getElementById('ringtone');
        if (audio) { audio.pause(); audio.currentTime = 0; }
        if (vibrationInterval) { clearInterval(vibrationInterval); vibrationInterval = null; }
        if (navigator.vibrate) navigator.vibrate(0);
    }

    function switchTab(id, el) {
        document.querySelectorAll('.content-view').forEach(e => e.classList.remove('active'));
        document.getElementById('view-' + id).classList.add('active');
        document.querySelectorAll('.nav-item').forEach(e => e.classList.remove('active'));
        el.classList.add('active');
    }

    /* 2. ëŒ€ì‚¬ ë°ì´í„° (Ver 16 ìœ ì§€) */
    const DB = {
        'prosecutor': { 
            caller: 'ì„œìš¸ì¤‘ì•™ì§€ê²€', loc: 'Seoul',
            steps: [
                { t: "ì„œìš¸ì¤‘ì•™ì§€ê²€ ì²¨ë‹¨ë²”ì£„ìˆ˜ì‚¬íŒ€ ê¹€ë¯¼ìˆ˜ ê²€ì‚¬ì…ë‹ˆë‹¤. ê·€í•˜ì˜ ëª…ì˜ê°€ ëŒ€í¬í†µì¥ ì‚¬ê¸°ì— ì—°ë£¨ë˜ì–´ ì—°ë½ë“œë ¸ìŠµë‹ˆë‹¤.", 
                  opt: [{tx:"ë„¤? ì œ í†µì¥ì´ìš”? ì œê°€ ì–´ë–»ê²Œ í•´ì•¼ í•˜ì£ ?", sc:-20, nx:1}, {tx:"ë¬´ìŠ¨ ì‚¬ê±´ ë²ˆí˜¸ê°€ ì–´ë–»ê²Œ ë˜ë‚˜ìš”? ì†Œì† ë‹¤ì‹œ ë§í•´ë³´ì„¸ìš”.", sc:0, nx:99}] },
                { t: "í”¼í•´ì ì…ì¦ì„ ëª»í•˜ì‹œë©´ êµ¬ì† ìˆ˜ì‚¬ ëŒ€ìƒì…ë‹ˆë‹¤. ì§€ê¸ˆ ë‹¹ì¥ ë³´ì•ˆ ì•±ì„ ì„¤ì¹˜í•´ì„œ ê³„ì¢Œ ì¸ì¦ì„ ì§„í–‰í•˜ì…”ì•¼ í•©ë‹ˆë‹¤.", 
                  opt: [{tx:"(ê²ë¨¹ìŒ) ë„¤, ì•Œê² ìŠµë‹ˆë‹¤. ë¹¨ë¦¬ ì•± ì„¤ì¹˜í• ê²Œìš”.", sc:-80, nx:-1}, {tx:"ì•„ë‹ˆìš”, ì œê°€ ì§ì ‘ ê²½ì°°ì„œ ê°€ì„œ í™•ì¸í•˜ê² ìŠµë‹ˆë‹¤. ëŠìŠµë‹ˆë‹¤.", sc:0, nx:99}] }
            ]
        },
        'loan': { 
            caller: '1588-XXXX', loc: 'Bank',
            steps: [
                { t: "ê³ ê°ë‹˜, ì´ë²ˆì— ì •ë¶€ì§€ì› ëŒ€í™˜ëŒ€ì¶œ ëŒ€ìƒìë¡œ ì„ ì •ë˜ì…”ì„œ ê¸ˆë¦¬ 2.5%ë¡œ ì „í™˜ ê°€ëŠ¥í•˜ì‹­ë‹ˆë‹¤.", 
                  opt: [{tx:"ìš”ì¦˜ ì´ìê°€ ë¹„ì‹¼ë° ì •ë§ì¸ê°€ìš”?", sc:-20, nx:1}, {tx:"ëŒ€ì¶œ ê¶Œìœ  ì „í™”ëŠ” ë¶ˆë²• ì•„ë‹Œê°€ìš”? ëŠê² ìŠµë‹ˆë‹¤.", sc:0, nx:99}] },
                { t: "ë„¤, ê·¸ëŸ°ë° ê¸°ì¡´ ëŒ€ì¶œê¸ˆì„ ì¼ë¶€ ìƒí™˜í•˜ì…”ì•¼ ì‹¤í–‰ì´ ë©ë‹ˆë‹¤. ì œê°€ ì•Œë ¤ë“œë¦¬ëŠ” ê°€ìƒê³„ì¢Œë¡œ ì…ê¸ˆí•˜ì‹œê² ì–´ìš”?", 
                  opt: [{tx:"ê³„ì¢Œë²ˆí˜¸ ì£¼ì‹œë©´ ë°”ë¡œ ë„£ì„ê²Œìš”.", sc:-80, nx:-1}, {tx:"ë‚¨ì˜ í†µì¥ìœ¼ë¡œ ì…ê¸ˆí•˜ëŠ” ê±´ ë³´ì´ìŠ¤í”¼ì‹±ì´ì£ .", sc:0, nx:99}] }
            ]
        },
        'family': { 
            caller: 'ë‚´ ë”¸â™¡', loc: 'Mobile',
            steps: [
                { t: "(ë¬¸ì) ì—„ë§ˆ ë‚˜ í° ì•¡ì • ê¹¨ì ¸ì„œ ìˆ˜ë¦¬ ë§¡ê²¼ì–´. ê¸‰í•˜ê²Œ ê²°ì œí•  ê²Œ ìˆëŠ”ë° ì—„ë§ˆ ì¹´ë“œ ì‚¬ì§„ ì¢€ ì°ì–´ ë³´ë‚´ì¤˜.", 
                  opt: [{tx:"ì–´ë¨¸, ë§ì´ ë‹¤ì¹œ ê±´ ì•„ë‹ˆë‹ˆ? ì¹´ë“œ ì°ì–´ ë³´ë‚¼ê²Œ.", sc:-50, nx:-1}, {tx:"ì›ë˜ ë²ˆí˜¸ë¡œ ì „í™”í•´ ë³¼ê²Œ. ëª©ì†Œë¦¬ ë“¤ì–´ì•¼ í•´.", sc:0, nx:99}] }
            ]
        },
        'romance': { 
            caller: 'James Kim', loc: 'Overseas',
            steps: [
                { t: "Honey, ë‚˜ íŒŒë³‘ ëë‚¬ì–´. í•œêµ­ ë“¤ì–´ê°€ì„œ ë„ˆë‘ ì‚´ê³  ì‹¶ì–´. ë‚´ ì§ì´ë‘ ê¸ˆê´´ë¥¼ í•œêµ­ìœ¼ë¡œ ë¨¼ì € ë³´ë‚¼ ê±´ë° í†µê´€ë¹„ 300ë§Œì›ì´ í•„ìš”í•´.", 
                  opt: [{tx:"ì–´ë¨¸, ì •ë§? ë‚´ê°€ í†µê´€ë¹„ ë³´ë‚´ì¤„ê²Œ.", sc:-100, nx:-1}, {tx:"ì–¼êµ´ í•œ ë²ˆ ì•ˆ ë³¸ ì‚¬ëŒí•œí…Œ ëˆì„ ì™œ ë³´ë‚´?", sc:0, nx:99}] }
            ]
        },
        'smishing': { 
            caller: 'ì²­ì£¼ì‹œì²­', loc: 'Cheongju',
            steps: [
                { t: "ë°•ìƒëª¨ë‹˜, ê·€í•˜ëŠ” ì²­ì£¼í˜ì´ ì¶”ê°€ ì ë¦½(30ë§Œì›) ëŒ€ìƒìì…ë‹ˆë‹¤. ê¸°í•œ ë‚´ ì•„ë˜ ë§í¬ë¡œ ì‹ ì²­í•˜ì„¸ìš”. (url í´ë¦­ ìœ ë„)", 
                  opt: [{tx:"(ë§í¬ë¥¼ ëˆ„ë¥¸ë‹¤)", sc:-100, nx:-1}, {tx:"ì‹œì²­ì€ ë¬¸ìë¡œ ë§í¬ ì•ˆ ë³´ëƒ…ë‹ˆë‹¤.", sc:0, nx:99}] }
            ]
        },
        'invest': { 
            caller: 'ê¹€ì‚¬ë¶€ íŒ€ì¥', loc: 'Investment',
            steps: [
                { t: "íšŒì›ë‹˜, ì´ë²ˆì— ì €í¬ VIP ë¦¬ë”©ë°©ì— ì´ˆëŒ€ë˜ì…¨ìŠµë‹ˆë‹¤. 300% ìˆ˜ìµ ë³´ì¥ë˜ëŠ” ì¢…ëª© ì•Œë ¤ë“œë¦½ë‹ˆë‹¤.", 
                  opt: [{tx:"ì •ë§ 300%ìš”? ì–´ë–»ê²Œ í•˜ë©´ ë˜ë‚˜ìš”?", sc:-30, nx:1}, {tx:"ì›ê¸ˆ ë³´ì¥ì€ ì‚¬ê¸°ì…ë‹ˆë‹¤.", sc:0, nx:99}] },
                { t: "ì¼ë‹¨ ì‹œë“œë¨¸ë‹ˆ 1,000ë§Œì›ë§Œ ì €í¬ ê±°ë˜ì†Œ ê³„ì¢Œë¡œ ì…ê¸ˆí•˜ì‹œë©´ ë‚´ì¼ ë°”ë¡œ 3ë°° ë¶ˆë ¤ë“œë¦½ë‹ˆë‹¤.", 
                  opt: [{tx:"ë„¤, ì§€ê¸ˆ ë°”ë¡œ ì…ê¸ˆí•˜ê² ìŠµë‹ˆë‹¤.", sc:-70, nx:-1}, {tx:"ê¸ˆìœµìœ„ì— ë“±ë¡ëœ ì—…ì²´ ë§ë‚˜ìš”? ì‹ ê³ í•©ë‹ˆë‹¤.", sc:0, nx:99}] }
            ]
        }
    };

    let curData, curScore;

    function startSim(type) {
        curData = DB[type]; curScore = 100;
        document.getElementById('sim-name').innerText = curData.caller;
        document.getElementById('sim-loc').innerText = curData.loc;
        document.getElementById('sim-overlay').classList.add('active');
        ['screen-call','screen-chat','screen-result'].forEach(e=>document.getElementById(e).style.display='none');
        document.getElementById('screen-call').style.display='flex';
        playRingtone();
    }

    function answerCall() {
        stopRingtone();
        document.getElementById('screen-call').style.display='none';
        document.getElementById('screen-chat').style.display='flex';
        document.getElementById('chat-box').innerHTML='';
        playStep(0);
    }

    function endSim(score) {
        stopRingtone();
        ['screen-call','screen-chat','screen-result'].forEach(e=>document.getElementById(e).style.display='none');
        document.getElementById('screen-result').style.display='flex';
        
        let circle=document.getElementById('res-circle'), title=document.getElementById('res-title'), desc=document.getElementById('res-desc');
        document.getElementById('res-score').innerText=score;
        if(score>=90){ 
            circle.className="score-circle safe"; title.innerText="ë°©ì–´ ì„±ê³µ"; title.style.color="var(--safe)"; 
            desc.innerText="í›Œë¥­í•©ë‹ˆë‹¤! ì¹¨ì°©í•˜ê²Œ ëŒ€ì‘í•˜ì…¨ìŠµë‹ˆë‹¤."; 
        } else{ 
            circle.className="score-circle danger"; title.innerText="í”¼í•´ ë°œìƒ"; title.style.color="var(--danger)"; 
            desc.innerText="ë²”ì£„ ìˆ˜ë²•ì— ë„˜ì–´ê°”ìŠµë‹ˆë‹¤. ì˜ì‹¬í•˜ê³  í™•ì¸í•˜ì„¸ìš”!"; 
        }
    }

    function checkQuiz(uFake, rFake, msg) {
        document.getElementById('sim-overlay').classList.add('active');
        endSim(uFake===rFake ? 100 : 0);
        document.getElementById('res-desc').innerText = msg;
    }

    function closeSim() {
        stopRingtone();
        document.getElementById('sim-overlay').classList.remove('active');
    }

    function playStep(idx) {
        if(idx===99||idx===-1) { endSim(curScore); return; }
        let step=curData.steps[idx];
        addBubble('them','...');
        setTimeout(()=>{
            let bs=document.querySelectorAll('.b-them'); bs[bs.length-1].innerText=step.t;
            let h=''; step.opt.forEach(o=>{ 
                h+=`<div class="choice-btn" onclick="choose('${o.tx}',${o.sc},${o.nx})"><span>${o.tx}</span> <span>ğŸ‘‰</span></div>`; 
            });
            document.getElementById('choice-dock').innerHTML=h;
        },600);
    }
    function choose(t,s,n) { curScore+=s; addBubble('me',t); document.getElementById('choice-dock').innerHTML=''; setTimeout(()=>playStep(n),500); }
    function addBubble(w,t) { let b=document.getElementById('chat-box'), d=document.createElement('div'); d.className=`bubble b-${w}`; d.innerText=t; b.appendChild(d); b.scrollTop=b.scrollHeight; }
</script>

</body>
</html>
